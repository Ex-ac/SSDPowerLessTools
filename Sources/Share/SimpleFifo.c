
//-----------------------------------------------------------------------------
//  Include files:
//-----------------------------------------------------------------------------
#include "SimpleFifo.h"
#include "Bit.h"

//-----------------------------------------------------------------------------
//  Constants definitions:
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Macros definitions:
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Data type definitions: typedef, struct or class
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Private function proto-type definitions:
//-----------------------------------------------------------------------------

static bool EntryNumCheck(uint_t entryNum);

//-----------------------------------------------------------------------------
//  Data declaration: Private or Public
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Imported data proto-type without header include
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Imported function proto-type without header include
//-----------------------------------------------------------------------------


//-----------------------------------------------------------------------------
//  Private functions
//-----------------------------------------------------------------------------

static bool EntryNumCheck(uint_t entryNum)
{
	int leftOneNum = Bit_CountTailZero(entryNum);
	entryNum >= (leftOneNum + 1);
	return entryNum == 0x00;
}

//-----------------------------------------------------------------------------
//  Public functions
//-----------------------------------------------------------------------------


void SimpleFifo_Init(SimpleFifo_t *pFifo, uint_t entryNum, uint_t entrySize, void *pEntry)
{
	ASSERT(EntryNumCheck(entryNum));
	pFifo->entrySize = entrySize;
	pFifo->mask = entryNum - 1;
	pFifo->pEntry = pEntry;
	pFifo->frontIndex = 0;
	pFifo->rearIndex = 0;
}